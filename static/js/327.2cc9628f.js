"use strict";(self["webpackChunkthree_demo2"]=self["webpackChunkthree_demo2"]||[]).push([[327],{7194:function(e,t,s){s.r(t),s.d(t,{default:function(){return p}});var n=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"demo29"},[s("div",{attrs:{id:"demo29Id"}}),s("div",{attrs:{id:"stats29Id"}})])}],o=s(9365),r=(s(7011),s(9477)),a=s(3466),l=s.n(a);s(4376);let d;var h={name:"Demo29",data(){return{scene:null,camera:null,renderer:null,axes:null,stats:null,controls:null,ctrlObj:{},ctrl:null,spotLight:null,clouds:{raindropCloud:null,snowflakeCloud1:null,snowflakeCloud2:null,snowflakeCloud3:null,snowflakeCloud4:null}}},mounted(){d=this,this.init(),window.addEventListener("resize",this.onWindowResize.bind(this))},methods:{init(){this.scene=new r.xsS,this.camera=new r.cPb(75,window.innerWidth/window.innerHeight,.1,1e3),this.renderer=new r.CP7,this.renderer.setClearColor(new r.Ilk(0)),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.shadowMap.enabled=!0,document.getElementById("demo29Id").appendChild(this.renderer.domElement),this.axes=new r.y8_(50),this.scene.add(this.axes),this.camera.position.x=-20,this.camera.position.y=250,this.camera.position.z=100,this.camera.lookAt(this.scene.position),this.scene.add(this.camera),this.addStats(),this.createControls(),this.spotLight=new r.PMe(16777215),this.spotLight.position.set(0,30,60),this.spotLight.castShadow=!0,this.scene.add(this.spotLight);const e=new r.Mig(16777215);this.scene.add(e),this.createParticles("snowflakeCloud1","雪花1.png"),this.createParticles("snowflakeCloud2","雪花2.png"),this.createParticles("snowflakeCloud3","雪花3.png"),this.createParticles("snowflakeCloud4","雪花4.png"),this.renderScene()},getTexture(e){const t=(new r.dpR).load(`/static/textures/${e}`);return t},createParticles(e,t){const s=new r.u9r,n=new r.UY4({size:10,transparent:!0,opacity:1,vertexColors:!1,map:this.getTexture(t),blending:r.WMw,depthTest:!0,depthWrite:!1,sizeAttenuation:!0,color:new r.Ilk(16777215)}),i=[],o=[],a=400;for(let r=0;r<15e3;r++)i.push(Math.random()*a-a/2,Math.random()*a*1.5,Math.random()*a-a/2),o.push((Math.random()-.5)/3,.1+Math.random()/5,(Math.random()-.5)/3);s.setAttribute("position",new r.a$l(i,3)),s.setAttribute("velocity",new r.a$l(o,3)),this.clouds[e]=new r.woe(s,n),this.clouds[e].name=e,this.scene.add(this.clouds[e])},createPoints(){const e=new r.u9r,t=new r.UY4({size:2,vertexColors:!0,color:16777215,map:this.getTexture("sprite.png")});t.map.offset=new r.FM8(.2,0),t.map.repeat=new r.FM8(.2,1),t.depthTest=!1;const s=[],n=[];for(let o=-30;o<30;o++)for(let e=-20;e<20;e++)for(let t=-30;t<30;t++){s.push(4*o,4*e,40*t);const i=new r.Ilk(16777215*Math.random());n.push(i.r,i.g,i.b)}e.setAttribute("position",new r.a$l(s,3)),e.setAttribute("color",new r.a$l(n,3));const i=new r.woe(e,t);this.scene.add(i)},createSprites(){for(let e=-30;e<30;e++)for(let t=-20;t<20;t++)for(let s=0;s<5;s++){const n=new r.xeV({opacity:.5,transparent:!0,color:16777215,map:this.getTexture("sprite.png")});n.map.offset=new r.FM8(.2*s,0),n.map.repeat=new r.FM8(.2,1),n.depthTest=!1;const i=new r.jyi(n);i.position.set(4*e,4*t,20*s),this.scene.add(i)}},renderScene(){this.stats.update(),this.controls.update(),this.cloudAnimation("snowflakeCloud1"),this.cloudAnimation("snowflakeCloud2"),this.cloudAnimation("snowflakeCloud3"),this.cloudAnimation("snowflakeCloud4"),requestAnimationFrame(this.renderScene),this.renderer.render(this.scene,this.camera)},cloudAnimation(e){if(this.clouds[e]instanceof r.woe){const t=this.clouds[e].geometry.getAttribute("position"),s=this.clouds[e].geometry.getAttribute("velocity");for(let e=0;e<t.count;e++){let n=t.getX(e),i=t.getY(e),o=t.getZ(e),r=s.getX(e);const a=s.getY(e);let l=s.getZ(e);n-=r,i-=a,o-=l,(n<=-200||n>=200)&&(r*=-1),i<=0&&(i=600),(o<=-200||o>=200)&&(l*=-1),t.setX(e,n),t.setY(e,i),t.setZ(e,o),s.setX(e,r),s.setZ(e,l)}t.needsUpdate=!0,s.needsUpdate=!0}},addStats(){this.stats=new(l()),this.stats.domElement.style.position="absolute",this.stats.domElement.style.left="0px",this.stats.domElement.style.top="0px",this.stats.setMode(0),document.getElementById("stats29Id").appendChild(this.stats.domElement)},onWindowResize(e){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},createControls(){this.controls=new o.z(this.camera,this.renderer.domElement),this.controls.update()}}},c=h,u=s(1001),w=(0,u.Z)(c,n,i,!1,null,"185b97ea",null),p=w.exports}}]);