"use strict";(self["webpackChunkthree_demo2"]=self["webpackChunkthree_demo2"]||[]).push([[6],{44006:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var i=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},s=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"demo14"},[n("div",{attrs:{id:"demo14Id"}}),n("div",{attrs:{id:"stats14Id"}})])}],a=(n(41539),n(84543)),r=n(62833),o=n(13087),h=n(93806),l=n(2730),u=n(53343),c=(n(52262),n(24506),n(93299),n(9653),0),d=1,v=new u.Pa4,f=new u.Zzh,p=new u.JOQ,m=new u.Pa4,x=new u.CJI,w=function(){function e(){(0,o.Z)(this,e),this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new E,this.unassigned=new E,this.vertices=[]}return(0,r.Z)(e,[{key:"setFromPoints",value:function(e){if(e.length>=4){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.vertices.push(new k(e[t]));this.compute()}return this}},{key:"setFromObject",value:function(e){var t=[];return e.updateMatrixWorld(!0),e.traverse((function(e){var n=e.geometry;if(void 0!==n){if(n.isGeometry)return void console.error("THREE.ConvexHull no longer supports Geometry. Use THREE.BufferGeometry instead.");if(n.isBufferGeometry){var i=n.attributes.position;if(void 0!==i)for(var s=0,a=i.count;s<a;s++){var r=new u.Pa4;r.fromBufferAttribute(i,s).applyMatrix4(e.matrixWorld),t.push(r)}}}})),this.setFromPoints(t)}},{key:"containsPoint",value:function(e){for(var t=this.faces,n=0,i=t.length;n<i;n++){var s=t[n];if(s.distanceToPoint(e)>this.tolerance)return!1}return!0}},{key:"intersectRay",value:function(e,t){for(var n=this.faces,i=-1/0,s=1/0,a=0,r=n.length;a<r;a++){var o=n[a],h=o.distanceToPoint(e.origin),l=o.normal.dot(e.direction);if(h>0&&l>=0)return null;var u=0!==l?-h/l:0;if(!(u<=0)&&(l>0?s=Math.min(u,s):i=Math.max(u,i),i>s))return null}return i!==-1/0?e.at(i,t):e.at(s,t),t}},{key:"intersectsRay",value:function(e){return null!==this.intersectRay(e,v)}},{key:"makeEmpty",value:function(){return this.faces=[],this.vertices=[],this}},{key:"addVertexToFace",value:function(e,t){return e.face=t,null===t.outside?this.assigned.append(e):this.assigned.insertBefore(t.outside,e),t.outside=e,this}},{key:"removeVertexFromFace",value:function(e,t){return e===t.outside&&(null!==e.next&&e.next.face===t?t.outside=e.next:t.outside=null),this.assigned.remove(e),this}},{key:"removeAllVerticesFromFace",value:function(e){if(null!==e.outside){var t=e.outside,n=e.outside;while(null!==n.next&&n.next.face===e)n=n.next;return this.assigned.removeSubList(t,n),t.prev=n.next=null,e.outside=null,t}}},{key:"deleteFaceVertices",value:function(e,t){var n=this.removeAllVerticesFromFace(e);if(void 0!==n)if(void 0===t)this.unassigned.appendChain(n);else{var i=n;do{var s=i.next,a=t.distanceToPoint(i.point);a>this.tolerance?this.addVertexToFace(i,t):this.unassigned.append(i),i=s}while(null!==i)}return this}},{key:"resolveUnassignedPoints",value:function(e){if(!1===this.unassigned.isEmpty()){var t=this.unassigned.first();do{for(var n=t.next,i=this.tolerance,s=null,a=0;a<e.length;a++){var r=e[a];if(r.mark===c){var o=r.distanceToPoint(t.point);if(o>i&&(i=o,s=r),i>1e3*this.tolerance)break}}null!==s&&this.addVertexToFace(t,s),t=n}while(null!==t)}return this}},{key:"computeExtremes",value:function(){for(var e=new u.Pa4,t=new u.Pa4,n=[],i=[],s=0;s<3;s++)n[s]=i[s]=this.vertices[0];e.copy(this.vertices[0].point),t.copy(this.vertices[0].point);for(var a=0,r=this.vertices.length;a<r;a++){for(var o=this.vertices[a],h=o.point,l=0;l<3;l++)h.getComponent(l)<e.getComponent(l)&&(e.setComponent(l,h.getComponent(l)),n[l]=o);for(var c=0;c<3;c++)h.getComponent(c)>t.getComponent(c)&&(t.setComponent(c,h.getComponent(c)),i[c]=o)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(e.x),Math.abs(t.x))+Math.max(Math.abs(e.y),Math.abs(t.y))+Math.max(Math.abs(e.z),Math.abs(t.z))),{min:n,max:i}}},{key:"computeInitialHull",value:function(){for(var e=this.vertices,t=this.computeExtremes(),n=t.min,i=t.max,s=0,a=0,r=0;r<3;r++){var o=i[r].point.getComponent(r)-n[r].point.getComponent(r);o>s&&(s=o,a=r)}var h,l,u=n[a],c=i[a];s=0,f.set(u.point,c.point);for(var d=0,v=this.vertices.length;d<v;d++){var x=e[d];if(x!==u&&x!==c){f.closestPointToPoint(x.point,!0,m);var w=m.distanceToSquared(x.point);w>s&&(s=w,h=x)}}s=-1,p.setFromCoplanarPoints(u.point,c.point,h.point);for(var y=0,k=this.vertices.length;y<k;y++){var E=e[y];if(E!==u&&E!==c&&E!==h){var P=Math.abs(p.distanceToPoint(E.point));P>s&&(s=P,l=E)}}var M=[];if(p.distanceToPoint(l.point)<0){M.push(g.create(u,c,h),g.create(l,c,u),g.create(l,h,c),g.create(l,u,h));for(var F=0;F<3;F++){var T=(F+1)%3;M[F+1].getEdge(2).setTwin(M[0].getEdge(T)),M[F+1].getEdge(1).setTwin(M[T+1].getEdge(0))}}else{M.push(g.create(u,h,c),g.create(l,u,c),g.create(l,c,h),g.create(l,h,u));for(var C=0;C<3;C++){var b=(C+1)%3;M[C+1].getEdge(2).setTwin(M[0].getEdge((3-C)%3)),M[C+1].getEdge(0).setTwin(M[b+1].getEdge(1))}}for(var S=0;S<4;S++)this.faces.push(M[S]);for(var Z=0,H=e.length;Z<H;Z++){var I=e[Z];if(I!==u&&I!==c&&I!==h&&I!==l){s=this.tolerance;for(var z=null,G=0;G<4;G++){var V=this.faces[G].distanceToPoint(I.point);V>s&&(s=V,z=this.faces[G])}null!==z&&this.addVertexToFace(I,z)}}return this}},{key:"reindexFaces",value:function(){for(var e=[],t=0;t<this.faces.length;t++){var n=this.faces[t];n.mark===c&&e.push(n)}return this.faces=e,this}},{key:"nextVertexToAdd",value:function(){if(!1===this.assigned.isEmpty()){var e,t=0,n=this.assigned.first().face,i=n.outside;do{var s=n.distanceToPoint(i.point);s>t&&(t=s,e=i),i=i.next}while(null!==i&&i.face===n);return e}}},{key:"computeHorizon",value:function(e,t,n,i){var s;this.deleteFaceVertices(n),n.mark=d,s=null===t?t=n.getEdge(0):t.next;do{var a=s.twin,r=a.face;r.mark===c&&(r.distanceToPoint(e)>this.tolerance?this.computeHorizon(e,a,r,i):i.push(s)),s=s.next}while(s!==t);return this}},{key:"addAdjoiningFace",value:function(e,t){var n=g.create(e,t.tail(),t.head());return this.faces.push(n),n.getEdge(-1).setTwin(t.twin),n.getEdge(0)}},{key:"addNewFaces",value:function(e,t){this.newFaces=[];for(var n=null,i=null,s=0;s<t.length;s++){var a=t[s],r=this.addAdjoiningFace(e,a);null===n?n=r:r.next.setTwin(i),this.newFaces.push(r.face),i=r}return n.next.setTwin(i),this}},{key:"addVertexToHull",value:function(e){var t=[];return this.unassigned.clear(),this.removeVertexFromFace(e,e.face),this.computeHorizon(e.point,null,e.face,t),this.addNewFaces(e,t),this.resolveUnassignedPoints(this.newFaces),this}},{key:"cleanup",value:function(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this}},{key:"compute",value:function(){var e;this.computeInitialHull();while(void 0!==(e=this.nextVertexToAdd()))this.addVertexToHull(e);return this.reindexFaces(),this.cleanup(),this}}]),e}(),g=function(){function e(){(0,o.Z)(this,e),this.normal=new u.Pa4,this.midpoint=new u.Pa4,this.area=0,this.constant=0,this.outside=null,this.mark=c,this.edge=null}return(0,r.Z)(e,[{key:"getEdge",value:function(e){var t=this.edge;while(e>0)t=t.next,e--;while(e<0)t=t.prev,e++;return t}},{key:"compute",value:function(){var e=this.edge.tail(),t=this.edge.head(),n=this.edge.next.head();return x.set(e.point,t.point,n.point),x.getNormal(this.normal),x.getMidpoint(this.midpoint),this.area=x.getArea(),this.constant=this.normal.dot(this.midpoint),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)-this.constant}}],[{key:"create",value:function(t,n,i){var s=new e,a=new y(t,s),r=new y(n,s),o=new y(i,s);return a.next=o.prev=r,r.next=a.prev=o,o.next=r.prev=a,s.edge=a,s.compute()}}]),e}(),y=function(){function e(t,n){(0,o.Z)(this,e),this.vertex=t,this.prev=null,this.next=null,this.twin=null,this.face=n}return(0,r.Z)(e,[{key:"head",value:function(){return this.vertex}},{key:"tail",value:function(){return this.prev?this.prev.vertex:null}},{key:"length",value:function(){var e=this.head(),t=this.tail();return null!==t?t.point.distanceTo(e.point):-1}},{key:"lengthSquared",value:function(){var e=this.head(),t=this.tail();return null!==t?t.point.distanceToSquared(e.point):-1}},{key:"setTwin",value:function(e){return this.twin=e,e.twin=this,this}}]),e}(),k=(0,r.Z)((function e(t){(0,o.Z)(this,e),this.point=t,this.prev=null,this.next=null,this.face=null})),E=function(){function e(){(0,o.Z)(this,e),this.head=null,this.tail=null}return(0,r.Z)(e,[{key:"first",value:function(){return this.head}},{key:"last",value:function(){return this.tail}},{key:"clear",value:function(){return this.head=this.tail=null,this}},{key:"insertBefore",value:function(e,t){return t.prev=e.prev,t.next=e,null===t.prev?this.head=t:t.prev.next=t,e.prev=t,this}},{key:"insertAfter",value:function(e,t){return t.prev=e,t.next=e.next,null===t.next?this.tail=t:t.next.prev=t,e.next=t,this}},{key:"append",value:function(e){return null===this.head?this.head=e:this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e,this}},{key:"appendChain",value:function(e){null===this.head?this.head=e:this.tail.next=e,e.prev=this.tail;while(null!==e.next)e=e.next;return this.tail=e,this}},{key:"remove",value:function(e){return null===e.prev?this.head=e.next:e.prev.next=e.next,null===e.next?this.tail=e.prev:e.next.prev=e.prev,this}},{key:"removeSubList",value:function(e,t){return null===e.prev?this.head=t.next:e.prev.next=t.next,null===t.next?this.tail=e.prev:t.next.prev=e.prev,this}},{key:"isEmpty",value:function(){return null===this.head}}]),e}(),P=function(e){(0,h.Z)(n,e);var t=(0,l.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,o.Z)(this,n),e=t.call(this);var s=[],a=[];void 0===w&&console.error("THREE.ConvexBufferGeometry: ConvexBufferGeometry relies on ConvexHull");for(var r=(new w).setFromPoints(i),h=r.faces,l=0;l<h.length;l++){var c=h[l],d=c.edge;do{var v=d.head().point;s.push(v.x,v.y,v.z),a.push(c.normal.x,c.normal.y,c.normal.z),d=d.next}while(d!==c.edge)}return e.setAttribute("position",new u.a$l(s,3)),e.setAttribute("normal",new u.a$l(a,3)),e}return(0,r.Z)(n)}(u.u9r),M=n(12606),F=n.n(M),T=n(45461),C={name:"Demo14",data:function(){return{scene:null,camera:null,renderer:null,axes:null,convexGeo:null,convexMat:null,convex:null,latheGeo:null,latheMat:null,lathe:null,stats:null,controls:null}},mounted:function(){this.init(),window.addEventListener("resize",this.onWindowResize.bind(this))},methods:{init:function(){var e=this;this.scene=new u.xsS,this.camera=new u.cPb(75,window.innerWidth/window.innerHeight/2,.1,1e3),this.renderer=new u.CP7,this.renderer.setClearColor(new u.Ilk(0)),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.shadowMap.enabled=!0,document.getElementById("demo14Id").appendChild(this.renderer.domElement),this.axes=new u.y8_(50),this.scene.add(this.axes);for(var t=[],n=0;n<20;n++){var i=40*Math.random()-20,s=40*Math.random()-20,a=40*Math.random()-20;t.push(new u.Pa4(i,s,a))}t.forEach((function(t){var n=new u.xo$(.3),i=new u.vBJ({color:16711680}),s=new u.Kj0(n,i);s.position.copy(t),s.translateX(-30),e.scene.add(s)})),this.convexGeo=new P(t),this.convexMat=new u.vBJ({color:65280,wireframe:!0}),this.convex=new u.Kj0(this.convexGeo,this.convexMat),this.convex.translateX(-30),this.scene.add(this.convex);for(var r=[],o=5;o<30;o++)r.push(new u.FM8(o+1,10*-Math.sin((o+1)/10)-10*Math.cos((o+1)/10)));this.latheGeo=new u.p7y(r,50,0,2*Math.PI),this.latheMat=new u.vBJ({color:65280,wireframe:!0}),this.lathe=new u.Kj0(this.latheGeo,this.latheMat),this.lathe.translateX(30),this.scene.add(this.lathe);var h={segments:4,phiStart:8,phiLength:2*Math.PI},l=new T.ZP.GUI,c=l.addFolder("lathe");c.add(h,"segments",1,100).onChange((function(t){e.editLathe(h,r)})),c.add(h,"phiStart",0,2*Math.PI).onChange((function(t){e.editLathe(h,r)})),c.add(h,"phiLength",0,2*Math.PI).onChange((function(t){e.editLathe(h,r)})),this.camera.position.x=0,this.camera.position.y=0,this.camera.position.z=100,this.camera.lookAt(this.scene.position),this.scene.add(this.camera),this.addStats(),this.createControls(),this.renderScene()},renderScene:function(){this.stats.update(),this.controls.update(),requestAnimationFrame(this.renderScene),this.renderer.render(this.scene,this.camera)},addStats:function(){this.stats=new(F()),this.stats.domElement.style.position="absolute",this.stats.domElement.style.left="0px",this.stats.domElement.style.top="0px",this.stats.setMode(0),document.getElementById("stats14Id").appendChild(this.stats.domElement)},onWindowResize:function(e){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},createControls:function(){this.controls=new a.z(this.camera,this.renderer.domElement),this.controls.update()},editLathe:function(e,t){this.scene.remove(this.lathe),this.latheGeo=new u.p7y(t,e.segments,e.phiStart,e.phiLength),this.lathe=new u.Kj0(this.latheGeo,this.latheMat),this.lathe.translateX(30),this.scene.add(this.lathe)}}},b=C,S=n(1001),Z=(0,S.Z)(b,i,s,!1,null,"9fc0d0f4",null),H=Z.exports}}]);