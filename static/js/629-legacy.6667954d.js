"use strict";(self["webpackChunkthree_demo2"]=self["webpackChunkthree_demo2"]||[]).push([[629],{85629:function(t,e,n){n.r(e),n.d(e,{default:function(){return C}});var i=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"demo11"},[n("div",{attrs:{id:"demo11Id"}}),n("div",{attrs:{id:"stats11Id"}})])}],r=n(84543),o=n(53343),a=n(12606),l=n.n(a),c=n(45461),h=n(74198),d=n(62833),u=n(13087),v=n(93806),p=n(2730),m=(n(21249),n(41539),n(44197),n(48675),n(92990),n(18927),n(33105),n(35035),n(74345),n(7174),n(32846),n(44731),n(77209),n(96319),n(58867),n(37789),n(33739),n(29368),n(14483),n(12056),n(3462),n(30678),n(27462),n(33824),n(55021),n(12974),n(15016),function(t){(0,v.Z)(n,t);var e=(0,p.Z)(n);function n(){var t;(0,u.Z)(this,n),t=e.call(this,n.Geometry,new o.vBJ({opacity:0,transparent:!0})),t.type="Lensflare",t.frustumCulled=!1,t.renderOrder=1/0;var i=new o.Pa4,s=new o.Pa4,r=new o.Wzm(16,16,o.wk1),a=new o.Wzm(16,16,o.wk1),l=n.Geometry,c=new o.FIo({uniforms:{scale:{value:null},screenPosition:{value:null}},vertexShader:"\n\n\t\t\t\tprecision highp float;\n\n\t\t\t\tuniform vec3 screenPosition;\n\t\t\t\tuniform vec2 scale;\n\n\t\t\t\tattribute vec3 position;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tgl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );\n\n\t\t\t\t}",fragmentShader:"\n\n\t\t\t\tprecision highp float;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tgl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );\n\n\t\t\t\t}",depthTest:!0,depthWrite:!1,transparent:!1}),h=new o.FIo({uniforms:{map:{value:r},scale:{value:null},screenPosition:{value:null}},vertexShader:"\n\n\t\t\t\tprecision highp float;\n\n\t\t\t\tuniform vec3 screenPosition;\n\t\t\t\tuniform vec2 scale;\n\n\t\t\t\tattribute vec3 position;\n\t\t\t\tattribute vec2 uv;\n\n\t\t\t\tvarying vec2 vUV;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvUV = uv;\n\n\t\t\t\t\tgl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );\n\n\t\t\t\t}",fragmentShader:"\n\n\t\t\t\tprecision highp float;\n\n\t\t\t\tuniform sampler2D map;\n\n\t\t\t\tvarying vec2 vUV;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tgl_FragColor = texture2D( map, vUV );\n\n\t\t\t\t}",depthTest:!1,depthWrite:!1,transparent:!1}),d=new o.Kj0(l,c),v=[],p=w.Shader,m=new o.FIo({uniforms:{map:{value:null},occlusionMap:{value:a},color:{value:new o.Ilk(16777215)},scale:{value:new o.FM8},screenPosition:{value:new o.Pa4}},vertexShader:p.vertexShader,fragmentShader:p.fragmentShader,blending:o.WMw,transparent:!0,depthWrite:!1}),f=new o.Kj0(l,m);t.addElement=function(t){v.push(t)};var g=new o.FM8,y=new o.FM8,x=new o.TUj,b=new o.Ltg;return t.onBeforeRender=function(t,e,n){t.getCurrentViewport(b);var o=b.w/b.z,u=b.z/2,p=b.w/2,w=16/b.w;if(g.set(w*o,w),x.min.set(b.x,b.y),x.max.set(b.x+(b.z-16),b.y+(b.w-16)),s.setFromMatrixPosition(this.matrixWorld),s.applyMatrix4(n.matrixWorldInverse),!(s.z>0)&&(i.copy(s).applyMatrix4(n.projectionMatrix),y.x=b.x+i.x*u+u-8,y.y=b.y+i.y*p+p-8,x.containsPoint(y))){t.copyFramebufferToTexture(y,r);var C=c.uniforms;C["scale"].value=g,C["screenPosition"].value=i,t.renderBufferDirect(n,null,l,c,d,null),t.copyFramebufferToTexture(y,a),C=h.uniforms,C["scale"].value=g,C["screenPosition"].value=i,t.renderBufferDirect(n,null,l,h,d,null);for(var P=2*-i.x,M=2*-i.y,S=0,z=v.length;S<z;S++){var E=v[S],L=m.uniforms;L["color"].value.copy(E.color),L["map"].value=E.texture,L["screenPosition"].value.x=i.x+P*E.distance,L["screenPosition"].value.y=i.y+M*E.distance,w=E.size/b.w;var I=b.w/b.z;L["scale"].value.set(w*I,w),m.uniformsNeedUpdate=!0,t.renderBufferDirect(n,null,l,m,f,null)}}},t.dispose=function(){c.dispose(),h.dispose(),m.dispose(),r.dispose(),a.dispose();for(var t=0,e=v.length;t<e;t++)v[t].texture.dispose()},t}return(0,d.Z)(n)}(o.Kj0));m.prototype.isLensflare=!0;var f,w=(0,d.Z)((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new o.Ilk(16777215);(0,u.Z)(this,t),this.texture=e,this.size=n,this.distance=i,this.color=s}));w.Shader={uniforms:{map:{value:null},occlusionMap:{value:null},color:{value:null},scale:{value:null},screenPosition:{value:null}},vertexShader:"\n\n\t\tprecision highp float;\n\n\t\tuniform vec3 screenPosition;\n\t\tuniform vec2 scale;\n\n\t\tuniform sampler2D occlusionMap;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\n\t\tvarying vec2 vUV;\n\t\tvarying float vVisibility;\n\n\t\tvoid main() {\n\n\t\t\tvUV = uv;\n\n\t\t\tvec2 pos = position.xy;\n\n\t\t\tvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\n\n\t\t\tvVisibility =        visibility.r / 9.0;\n\t\t\tvVisibility *= 1.0 - visibility.g / 9.0;\n\t\t\tvVisibility *=       visibility.b / 9.0;\n\n\t\t\tgl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tprecision highp float;\n\n\t\tuniform sampler2D map;\n\t\tuniform vec3 color;\n\n\t\tvarying vec2 vUV;\n\t\tvarying float vVisibility;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texture = texture2D( map, vUV );\n\t\t\ttexture.a *= vVisibility;\n\t\t\tgl_FragColor = texture;\n\t\t\tgl_FragColor.rgb *= color;\n\n\t\t}"},m.Geometry=function(){var t=new o.u9r,e=new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1]),n=new o.vpT(e,5);return t.setIndex([0,1,2,0,2,3]),t.setAttribute("position",new o.kB5(n,3,0,!1)),t.setAttribute("uv",new o.kB5(n,2,3,!1)),t}();var g={name:"Demo11",data:function(){return{scene:null,camera:null,renderer:null,axes:null,planeGeometry:null,planeMaterial:null,plane:null,stats:null,controls:null,directionalLight:null,hemisphereLight:null}},mounted:function(){f=this,this.init(),window.addEventListener("resize",this.onWindowResize.bind(this))},methods:{init:function(){this.scene=new o.xsS,this.camera=new o.cPb(75,window.innerWidth/window.innerHeight/2,.1,1e3),this.renderer=new o.CP7,this.renderer.setClearColor(new o.Ilk(0)),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.shadowMap.enabled=!0,document.getElementById("demo11Id").appendChild(this.renderer.domElement),this.axes=new o.y8_(50),this.scene.add(this.axes),this.loadModel(),this.planeGeometry=new o._12(100,100),this.planeMaterial=new o.YBo({color:13421772}),this.plane=new o.Kj0(this.planeGeometry,this.planeMaterial),this.plane.rotation.x=-.5*Math.PI,this.plane.position.set(15,0,0),this.plane.receiveShadow=!0,this.scene.add(this.plane),this.camera.position.x=-5,this.camera.position.y=5,this.camera.position.z=5,this.camera.lookAt(this.scene.position),this.scene.add(this.camera),this.directionalLight=new o.Ox3(16777215,2),this.directionalLight.castShadow=!0,this.directionalLight.shadow.mapSize.width=2048,this.directionalLight.shadow.mapSize.height=2048,this.directionalLight.position.set(20,20,20),this.scene.add(this.directionalLight),this.addStats(),this.createControls(),this.hemisphereLight=new o.vmT(16777215,65280,1),this.hemisphereLight.position.set(100,50,100),this.scene.add(this.hemisphereLight);var t={hemisphereLightVisible:!0,skyColor:16777215,groundColor:65280,hemisphereIntensity:1,lensflareElSize:30,lensflareElDistance:.2,lensflareElColor:16777215},e=new c.ZP.GUI,n=e.addFolder("hemisphereLight");n.add(t,"hemisphereLightVisible").onChange((function(t){f.hemisphereLight.visible=t})),n.addColor(t,"skyColor").onChange((function(t){f.hemisphereLight.color=new o.Ilk(t)})),n.addColor(t,"groundColor").onChange((function(t){f.hemisphereLight.groundColor=new o.Ilk(t)})),n.add(t,"hemisphereIntensity",0,10).onChange((function(t){f.hemisphereLight.intensity=t}));var i=new o.dpR,s=i.load("/static/textures/lensflare0.png"),r=i.load("/static/textures/lensflare1.png"),a=new m;a.addElement(new w(s,500,0)),a.addElement(new w(r,60,.1));var l=new w(r,30,.2);a.addElement(l),this.hemisphereLight.add(a);var h=e.addFolder("lensflareElement");h.add(t,"lensflareElSize",0,60).onChange((function(t){l.size=t})),h.add(t,"lensflareElDistance",0,1).onChange((function(t){l.distance=t})),h.addColor(t,"lensflareElColor").onChange((function(t){l.color=new o.Ilk(t)})),this.renderScene()},renderScene:function(){this.stats.update(),this.controls.update(),requestAnimationFrame(this.renderScene),this.renderer.render(this.scene,this.camera)},addStats:function(){this.stats=new(l()),this.stats.domElement.style.position="absolute",this.stats.domElement.style.left="0px",this.stats.domElement.style.top="0px",this.stats.setMode(0),document.getElementById("stats11Id").appendChild(this.stats.domElement)},onWindowResize:function(t){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},createControls:function(){this.controls=new r.z(this.camera,this.renderer.domElement),this.controls.update()},loadModel:function(){var t=this;(new h.E).setPath("./static/model/").load("untitled.glb",(function(e){console.log(e),e.scene.scale.set(.01,.01,.01),e.scene.traverse((function(t){t.isMesh&&(t.castShadow=!0)})),t.scene.add(e.scene)}))}}},y=g,x=n(1001),b=(0,x.Z)(y,i,s,!1,null,"34890268",null),C=b.exports}}]);