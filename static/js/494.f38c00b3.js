"use strict";(self["webpackChunkthree_demo2"]=self["webpackChunkthree_demo2"]||[]).push([[494],{4494:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var o=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"demo30"},[n("div",{attrs:{id:"demo30Id"}}),n("div",{attrs:{id:"stats30Id"}})])}],i=n(81),s=n(140),a=n(9365),h=n(9753),d=n(2327),c=n(5892),l=n(9477),u=n(3466),g=n.n(u),p=n(4376);let m;var G={name:"Demo30",data(){return{scene:null,camera:null,renderer:null,axes:null,stats:null,ctrlObj:null,controls:{orbitControls:null,trackballControls:null,transformControls:null,dragControls:null},plane:null,planeGeo:null,planeMat:null,circle:null,circleGeo:null,circleMat:null,ring:null,ringGeo:null,ringMat:null,box:null,boxGeo:null,boxMat:null,sphere:null,sphereGeo:null,sphereMat:null,cylinder:null,cylinderGeo:null,cylinderMat:null,cone:null,coneGeo:null,coneMat:null,torus:null,torusGeo:null,torusMat:null,torusKnot:null,torusKnotGeo:null,torusKnotMat:null,icosahedron:null,icosahedronGeo:null,icosahedronMat:null,tetrahedron:null,tetrahedronGeo:null,tetrahedronMat:null,octahedron:null,octahedronGeo:null,octahedronMat:null,dodecahedron:null,dodecahedronGeo:null,dodecahedronMat:null,group:null,step:.01,canDragMeshs:[]}},mounted(){m=this,this.init(),window.addEventListener("keydown",this.onKeyDown.bind(this)),window.addEventListener("keyup",this.onKeyUp.bind(this)),window.addEventListener("resize",this.onWindowResize.bind(this)),this.$watch("scene.children",(function(){this.createDragControls()}))},methods:{init(){this.scene=new l.xsS,this.camera=new l.cPb(75,window.innerWidth/window.innerHeight/2,.1,1e3),this.renderer=new l.CP7,this.renderer.setClearColor(new l.Ilk(0)),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.shadowMap.enabled=!0,document.getElementById("demo30Id").appendChild(this.renderer.domElement),this.axes=new l.y8_(50),this.scene.add(this.axes);const e=new l.Mig(16777215);this.scene.add(e),this.camera.position.x=0,this.camera.position.y=0,this.camera.position.z=120,this.camera.lookAt(this.scene.position),this.scene.add(this.camera),this.addStats(),this.group=new l.ZAu,this.scene.add(this.group),this.addGeometry(),this.addGeometryFolder(),this.createTrackballControls(),this.createTransformControls(),this.createDragControls(),this.renderScene()},addGeometry(){this.planeGeo=new l._12(4,8,4,8),this.planeMat=new l.vBJ({color:16711680}),this.planeMat.side=l.ehD,this.planeMat.wireframe=!0,this.plane=new l.Kj0(this.planeGeo,this.planeMat),this.group.add(this.plane),this.circleGeo=new l.zf8(4,10,0,2*Math.PI),this.circleMat=new l.vBJ({color:65280,wireframe:!0,side:l.ehD}),this.circle=new l.Kj0(this.circleGeo,this.circleMat),this.circle.translateX(20),this.group.add(this.circle),this.ringGeo=new l.o8S(3,4,8,8,0,2*Math.PI),this.ringMat=new l.vBJ({color:16711935,wireframe:!0,side:l.ehD}),this.ring=new l.Kj0(this.ringGeo,this.ringMat),this.ring.translateX(40),this.group.add(this.ring),this.boxGeo=new l.DvJ(3,4,2,3,4,2),this.boxMat=new l.vBJ({color:255,wireframe:!0}),this.box=new l.Kj0(this.boxGeo,this.boxMat),this.box.translateY(20),this.group.add(this.box),this.sphereGeo=new l.xo$(3,8,8,0,2*Math.PI,0,2*Math.PI),this.sphereMat=new l.vBJ({color:16777215,wireframe:!0}),this.sphere=new l.Kj0(this.sphereGeo,this.sphereMat),this.sphere.translateX(20),this.sphere.translateY(20),this.group.add(this.sphere),this.cylinderGeo=new l.fHI(2,2,4,8,4,!0,0,2*Math.PI),this.cylinderMat=new l.vBJ({color:65535,wireframe:!0}),this.cylinder=new l.Kj0(this.cylinderGeo,this.cylinderMat),this.cylinder.translateX(40),this.cylinder.translateY(20),this.group.add(this.cylinder),this.coneGeo=new l.b_z(2,4,8,4,!0,0,2*Math.PI),this.coneMat=new l.vBJ({color:16776960,wireframe:!0}),this.cone=new l.Kj0(this.coneGeo,this.coneMat),this.cone.translateX(60),this.cone.translateY(20),this.group.add(this.cone),this.torusGeo=new l.XvJ(3,1,8,8,2*Math.PI),this.torusMat=new l.vBJ({color:16711680,wireframe:!0}),this.torus=new l.Kj0(this.torusGeo,this.torusMat),this.torus.translateY(40),this.group.add(this.torus),this.torusKnotGeo=new l.FE5(3,1,60,20,2,3),this.torusKnotMat=new l.vBJ({color:65280,wireframe:!0}),this.torusKnot=new l.Kj0(this.torusKnotGeo,this.torusKnotMat),this.torusKnot.translateY(40),this.torusKnot.translateX(20),this.group.add(this.torusKnot),this.icosahedronGeo=new l.cJO(4,0),this.icosahedronMat=new l.vBJ({color:16776960,wireframe:!0}),this.icosahedron=new l.Kj0(this.icosahedronGeo,this.icosahedronMat),this.icosahedron.translateY(60),this.group.add(this.icosahedron),this.tetrahedronGeo=new l.H$k(4,0),this.tetrahedronMat=new l.vBJ({color:16777215,wireframe:!0}),this.tetrahedron=new l.Kj0(this.tetrahedronGeo,this.tetrahedronMat),this.tetrahedron.translateY(60),this.tetrahedron.translateX(20),this.group.add(this.tetrahedron),this.octahedronGeo=new l.pQR(4,0),this.octahedronMat=new l.vBJ({color:65535,wireframe:!0}),this.octahedron=new l.Kj0(this.octahedronGeo,this.octahedronMat),this.octahedron.translateY(60),this.octahedron.translateX(40),this.group.add(this.octahedron),this.dodecahedronGeo=new l.Kgo(4,0),this.dodecahedronMat=new l.vBJ({color:16711935,wireframe:!0}),this.dodecahedron=new l.Kj0(this.dodecahedronGeo,this.dodecahedronMat),this.dodecahedron.translateY(60),this.dodecahedron.translateX(60),this.group.add(this.dodecahedron)},addGeometryFolder(){this.ctrlObj={width:4,height:8,widthSegments:4,heightSegments:8,circleRadius:4,circleSegments:10,circleThetaStart:0,circleThetaLength:2*Math.PI,ringInnerRadius:3,ringOuterRadius:4,ringThetaSegments:8,ringPhiSegments:8,ringThetaStart:0,ringThetaLength:2*Math.PI,boxWidth:3,boxHeight:4,boxDepth:2,boxWidthSegments:3,boxHeightSegments:4,boxDepthSegments:5,sphereRadius:3,sphereWidthSegments:8,sphereHeightSegments:8,spherePhiStart:0,spherePhiLength:2*Math.PI,sphereThetaStart:0,sphereThetaLength:2*Math.PI,cylinderRadiusTop:2,cylinderRadiusBottom:2,cylinderHeight:4,cylinderRadialSegments:8,cylinderHeightSegments:4,cylinderOpenEnded:!0,cylinderThetaStart:0,cylinderThetaLength:2*Math.PI,coneRadius:2,coneHeight:4,coneRadialSegments:8,coneHeightSegments:4,coneOpenEnded:!0,coneThetaStart:0,coneThetaLength:2*Math.PI,torusRadius:3,torusTube:1,torusRadialSegments:8,torusTubularSegments:8,torusArc:2*Math.PI,torusKnotRadius:3,torusKnotTube:1,torusKnotTubularSegments:60,torusKnotRadialSegments:20,torusKnotP:2,torusKnotQ:3,icosahedronRadius:4,icosahedronDetail:0,tetrahedronRadius:4,tetrahedronDetail:0,octahedronRadius:4,octahedronDetail:0,dodecahedronRadius:4,dodecahedronDetail:0,grouping:!1,rotate:!0,saveCombineGeometry:()=>{const e=[];m.group.children.forEach((t=>{if(t instanceof l.Kj0){t.geometry.deleteAttribute("normal"),t.geometry.deleteAttribute("uv");const n=(0,s.$1)(t.geometry);n.applyMatrix4(t.matrixWorld),e.push(n)}}));const t=new l.vBJ({color:65535,wireframe:!0,side:l.ehD}),n=(0,s.qf)(e),o=new l.Kj0(n,t),r=o.toJSON();localStorage.setItem("sceneJson",JSON.stringify(r))},saveTorusKnot:()=>{const e=m.torusKnot.toJSON();localStorage.setItem("sceneJson",JSON.stringify(e))},load:()=>{const e=JSON.parse(localStorage.getItem("sceneJson"));if(!e)return void this.$Message.info("请先保存three对象");const t=new l.Gql,n=t.parse(e);n.geometry instanceof l.FE5?n.position.x=-30:n.position.x=-70,m.scene.add(n),localStorage.removeItem("sceneJson")}};const e=this.ctrlObj,t=new p.ZP.GUI,n=t.addFolder("plane");n.add(e,"width",0,20).onChange((function(){m.editGeo("plane",e)})),n.add(e,"height",0,20).onChange((function(){m.editGeo("plane",e)})),n.add(e,"widthSegments",1,20).onChange((function(){m.editGeo("plane",e)})),n.add(e,"heightSegments",1,20).onChange((function(){m.editGeo("plane",e)}));const o=t.addFolder("circle");o.add(e,"circleRadius",0,20).onChange((function(){m.editGeo("circle",e)})),o.add(e,"circleSegments",1,50).onChange((function(){m.editGeo("circle",e)})),o.add(e,"circleThetaStart",0,2*Math.PI).onChange((function(){m.editGeo("circle",e)})),o.add(e,"circleThetaLength",0,2*Math.PI).onChange((function(){m.editGeo("circle",e)}));const r=t.addFolder("ring");r.add(e,"ringInnerRadius",0,20).onChange((function(){m.editGeo("ring",e)})),r.add(e,"ringOuterRadius",0,20).onChange((function(){m.editGeo("ring",e)})),r.add(e,"ringThetaSegments",0,20).onChange((function(){m.editGeo("ring",e)})),r.add(e,"ringPhiSegments",0,20).onChange((function(){m.editGeo("ring",e)})),r.add(e,"ringThetaStart",0,2*Math.PI).onChange((function(){m.editGeo("ring",e)})),r.add(e,"ringThetaLength",0,2*Math.PI).onChange((function(){m.editGeo("ring",e)}));const i=t.addFolder("box");i.add(e,"boxWidth",0,20).onChange((function(){m.editGeo("box",e)})),i.add(e,"boxHeight",0,20).onChange((function(){m.editGeo("box",e)})),i.add(e,"boxDepth",0,20).onChange((function(){m.editGeo("box",e)})),i.add(e,"boxWidthSegments",1,20).onChange((function(){m.editGeo("box",e)})),i.add(e,"boxHeightSegments",1,20).onChange((function(){m.editGeo("box",e)})),i.add(e,"boxDepthSegments",1,20).onChange((function(){m.editGeo("box",e)}));const a=t.addFolder("sphere");a.add(e,"sphereRadius",0,20).onChange((function(){m.editGeo("sphere",e)})),a.add(e,"sphereWidthSegments",0,20).onChange((function(){m.editGeo("sphere",e)})),a.add(e,"sphereHeightSegments",0,20).onChange((function(){m.editGeo("sphere",e)})),a.add(e,"spherePhiStart",0,2*Math.PI).onChange((function(){m.editGeo("sphere",e)})),a.add(e,"spherePhiLength",0,2*Math.PI).onChange((function(){m.editGeo("sphere",e)})),a.add(e,"sphereThetaStart",0,2*Math.PI).onChange((function(){m.editGeo("sphere",e)})),a.add(e,"sphereThetaLength",0,2*Math.PI).onChange((function(){m.editGeo("sphere",e)}));const h=t.addFolder("cylinder");h.add(e,"cylinderRadiusTop",-10,10).onChange((function(){m.editGeo("cylinder",e)})),h.add(e,"cylinderRadiusBottom",-10,10).onChange((function(){m.editGeo("cylinder",e)})),h.add(e,"cylinderHeight",0,20).onChange((function(){m.editGeo("cylinder",e)})),h.add(e,"cylinderRadialSegments",1,20).onChange((function(){m.editGeo("cylinder",e)})),h.add(e,"cylinderHeightSegments",1,20).onChange((function(){m.editGeo("cylinder",e)})),h.add(e,"cylinderOpenEnded",!0,!1).onChange((function(){m.editGeo("cylinder",e)})),h.add(e,"cylinderThetaStart",0,2*Math.PI).onChange((function(){m.editGeo("cylinder",e)})),h.add(e,"cylinderThetaLength",0,2*Math.PI).onChange((function(){m.editGeo("cylinder",e)}));const d=t.addFolder("cone");d.add(e,"coneRadius",0,10).onChange((function(){m.editGeo("cone",e)})),d.add(e,"coneHeight",0,20).onChange((function(){m.editGeo("cone",e)})),d.add(e,"coneRadialSegments",1,20).onChange((function(){m.editGeo("cone",e)})),d.add(e,"coneHeightSegments",1,20).onChange((function(){m.editGeo("cone",e)})),d.add(e,"coneOpenEnded",!0,!1).onChange((function(){m.editGeo("cone",e)})),d.add(e,"coneThetaStart",0,2*Math.PI).onChange((function(){m.editGeo("cone",e)})),d.add(e,"coneThetaLength",0,2*Math.PI).onChange((function(){m.editGeo("cone",e)}));const c=t.addFolder("torus");c.add(e,"torusRadius",0,20).onChange((function(){m.editGeo("torus",e)})),c.add(e,"torusTube",0,10).onChange((function(){m.editGeo("torus",e)})),c.add(e,"torusRadialSegments",1,20).onChange((function(){m.editGeo("torus",e)})),c.add(e,"torusTubularSegments",1,50).onChange((function(){m.editGeo("torus",e)})),c.add(e,"torusArc",0,2*Math.PI).onChange((function(){m.editGeo("torus",e)}));const u=t.addFolder("torusKnot");u.add(e,"torusKnotRadius",0,10).onChange((function(){m.editGeo("torusKnot",e)})),u.add(e,"torusKnotTube",0,5).onChange((function(){m.editGeo("torusKnot",e)})),u.add(e,"torusKnotTubularSegments",1,200).onChange((function(){m.editGeo("torusKnot",e)})),u.add(e,"torusKnotRadialSegments",1,40).onChange((function(){m.editGeo("torusKnot",e)})),u.add(e,"torusKnotP",1,10).onChange((function(){m.editGeo("torusKnot",e)})),u.add(e,"torusKnotQ",0,10).onChange((function(){m.editGeo("torusKnot",e)}));const g=t.addFolder("icosahedron");g.add(e,"icosahedronRadius",0,20).onChange((function(){m.editGeo("icosahedron",e)})),g.add(e,"icosahedronDetail",0,5).step(1).onChange((function(){m.editGeo("icosahedron",e)}));const G=t.addFolder("tetrahedron");G.add(e,"tetrahedronRadius",0,20).onChange((function(){m.editGeo("tetrahedron",e)})),G.add(e,"tetrahedronDetail",0,5).step(1).onChange((function(){m.editGeo("tetrahedron",e)}));const w=t.addFolder("octahedron");w.add(e,"octahedronRadius",0,20).onChange((function(){m.editGeo("octahedron",e)})),w.add(e,"octahedronDetail",0,5).step(1).onChange((function(){m.editGeo("octahedron",e)}));const b=t.addFolder("dodecahedron");b.add(e,"dodecahedronRadius",0,20).onChange((function(){m.editGeo("dodecahedron",e)})),b.add(e,"dodecahedronDetail",0,5).step(1).onChange((function(){m.editGeo("dodecahedron",e)}));const f=t.addFolder("group");f.add(e,"grouping"),f.add(e,"rotate");const C=t.addFolder("saveload");C.add(e,"saveTorusKnot"),C.add(e,"saveCombineGeometry"),C.add(e,"load")},renderScene(){this.stats.update(),this.controls.orbitControls?.update(),this.ctrlObj.grouping&&this.ctrlObj.rotate&&(this.group.rotation.y+=this.step),this.ctrlObj.rotate&&!this.ctrlObj.grouping&&this.group.children.forEach((e=>{e instanceof l.Kj0&&(e.rotation.y+=this.step)})),requestAnimationFrame(this.renderScene),this.renderer.render(m.scene,this.camera)},addStats(){this.stats=new(g()),this.stats.domElement.style.position="absolute",this.stats.domElement.style.left="0px",this.stats.domElement.style.top="0px",this.stats.setMode(0),document.getElementById("stats30Id").appendChild(this.stats.domElement)},onKeyDown(e){if(!e.repeat)switch(e.keyCode){case 17:(0,i.Ft)(this.controls.orbitControls)&&this.createOrbitControls(),this.controls.orbitControls.enabled||(this.controls.orbitControls.enabled=!0);break;default:break}},onKeyUp(e){switch(e.keyCode){case 17:this.controls.orbitControls.enabled&&(this.controls.orbitControls.enabled=!1);break;default:break}},onWindowResize(e){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},createOrbitControls(){this.controls.orbitControls=new a.z(this.camera,this.renderer.domElement),this.controls.orbitControls.update()},createTrackballControls(){this.controls.trackballControls=new h.$(this.camera,this.renderer.domElement),this.controls.trackballControls.noPan=!0,this.controls.trackballControls.minDistance=1e3,this.controls.trackballControls.maxDistance=5e3},createTransformControls(){this.controls.transformControls=new d.Ys(this.camera,this.renderer.domElement),this.scene.add(this.controls.transformControls)},createDragControls(){this.canDragMeshs=[];for(let e=0;e<this.scene.children.length;e++){const t=this.scene.children[e];if(t.isGroup)for(let e=0;e<t.children.length;e++){const n=t.children[e];n.isMesh&&this.canDragMeshs.push(n)}t.isMesh&&this.canDragMeshs.push(t)}this.controls.dragControls=new c.S(this.canDragMeshs,this.camera,this.renderer.domElement),this.controls.dragControls.addEventListener("hoveron",(e=>{this.controls.transformControls.attach(e.object)})),this.controls.dragControls.addEventListener("hoveroff",(e=>{this.controls.transformControls.detach(e.object)})),this.controls.dragControls.addEventListener("dragstart",(e=>{this.controls.trackballControls.enabled=!1})),this.controls.dragControls.addEventListener("dragend",(e=>{this.controls.trackballControls.enabled=!0}))},editGeo(e,t){switch(e){case"plane":this.group.remove(this.plane),this.planeGeo=new l._12(t.width,t.height,t.widthSegments,t.heightSegments),this.plane=new l.Kj0(this.planeGeo,this.planeMat),this.group.add(this.plane);break;case"circle":this.group.remove(this.circle),this.circleGeo=new l.zf8(t.circleRadius,t.circleSegments,t.circleThetaStart,t.circleThetaLength),this.circle=new l.Kj0(this.circleGeo,this.circleMat),this.group.add(this.circle),this.circle.translateX(20);break;case"ring":this.group.remove(this.ring),this.ringGeo=new l.o8S(t.ringInnerRadius,t.ringOuterRadius,t.ringThetaSegments,t.ringPhiSegments,t.ringThetaStart,t.ringThetaLength),this.ring=new l.Kj0(this.ringGeo,this.ringMat),this.group.add(this.ring),this.ring.translateX(40);break;case"box":this.group.remove(this.box),this.boxGeo=new l.DvJ(t.boxWidth,t.boxHeight,t.boxDepth,t.boxWidthSegments,t.boxHeightSegments,t.boxDepthSegments),this.box=new l.Kj0(this.boxGeo,this.boxMat),this.group.add(this.box),this.box.translateY(20);break;case"sphere":this.group.remove(this.sphere),this.sphereGeo=new l.xo$(t.sphereRadius,t.sphereWidthSegments,t.sphereHeightSegments,t.spherePhiStart,t.spherePhiLength,t.sphereThetaStart,t.sphereThetaLength),this.sphere=new l.Kj0(this.sphereGeo,this.sphereMat),this.group.add(this.sphere),this.sphere.translateX(20),this.sphere.translateY(20);break;case"cylinder":this.group.remove(this.cylinder),this.cylinderGeo=new l.fHI(t.cylinderRadiusTop,t.cylinderRadiusBottom,t.cylinderHeight,t.cylinderRadialSegments,t.cylinderHeightSegments,t.cylinderOpenEnded,t.cylinderThetaStart,t.cylinderThetaLength),this.cylinder=new l.Kj0(this.cylinderGeo,this.cylinderMat),this.group.add(this.cylinder),this.cylinder.translateX(40),this.cylinder.translateY(20);break;case"cone":this.group.remove(this.cone),this.coneGeo=new l.b_z(t.coneRadius,t.coneHeight,t.coneRadialSegments,t.coneHeightSegments,t.coneOpenEnded,t.coneThetaStart,t.coneThetaLength),this.cone=new l.Kj0(this.coneGeo,this.coneMat),this.group.add(this.cone),this.cone.translateX(60),this.cone.translateY(20);break;case"torus":this.group.remove(this.torus),this.torusGeo=new l.XvJ(t.torusRadius,t.torusTube,t.torusRadialSegments,t.torusTubularSegments,t.torusArc),this.torus=new l.Kj0(this.torusGeo,this.torusMat),this.group.add(this.torus),this.torus.translateY(40);break;case"torusKnot":this.group.remove(this.torusKnot),this.torusKnotGeo=new l.FE5(t.torusKnotRadius,t.torusKnotTube,t.torusKnotTubularSegments,t.torusKnotRadialSegments,Math.round(t.torusKnotP),Math.round(t.torusKnotQ)),this.torusKnot=new l.Kj0(this.torusKnotGeo,this.torusKnotMat),this.group.add(this.torusKnot),this.torusKnot.translateY(40),this.torusKnot.translateX(20);break;case"icosahedron":this.group.remove(this.icosahedron),this.icosahedronGeo=new l.cJO(t.icosahedronRadius,t.icosahedronDetail),this.icosahedron=new l.Kj0(this.icosahedronGeo,this.icosahedronMat),this.group.add(this.icosahedron),this.icosahedron.translateY(60);break;case"tetrahedron":this.group.remove(this.tetrahedron),this.tetrahedronGeo=new l.H$k(t.tetrahedronRadius,t.tetrahedronDetail),this.tetrahedron=new l.Kj0(this.tetrahedronGeo,this.tetrahedronMat),this.group.add(this.tetrahedron),this.tetrahedron.translateY(60),this.tetrahedron.translateX(20);break;case"octahedron":this.group.remove(this.octahedron),this.octahedronGeo=new l.pQR(t.octahedronRadius,t.octahedronDetail),this.octahedron=new l.Kj0(this.octahedronGeo,this.octahedronMat),this.group.add(this.octahedron),this.octahedron.translateY(60),this.octahedron.translateX(40);break;case"dodecahedron":this.group.remove(this.dodecahedron),this.dodecahedronGeo=new l.Kgo(t.dodecahedronRadius,t.dodecahedronDetail),this.dodecahedron=new l.Kj0(this.dodecahedronGeo,this.dodecahedronMat),this.group.add(this.dodecahedron),this.dodecahedron.translateY(60),this.dodecahedron.translateX(60);break;default:break}}}},w=G,b=n(1001),f=(0,b.Z)(w,o,r,!1,null,"350f4012",null),C=f.exports}}]);